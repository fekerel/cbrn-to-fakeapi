{
  "openapi": "3.0.0",
  "info": {
    "title": "JSON Server API (isSelect Only)",
    "version": "1.0.0",
    "description": "Only endpoints with isSelect: true are shown"
  },
  "paths": {
    "/products": {
      "post": {
        "isSelect": true,
        "summary": "Create new products",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/products"
              },
              "example": {
                "sellerId": null,
                "categoryId": null,
                "name": "api-test 11/17/2025, 4:04:56 PM",
                "description": "Introducing the Lebanon-inspired Chips, blending ordinary style with local craftsmanship",
                "price": 48.18,
                "stock": 163,
                "variants": [
                  {
                    "id": "VAR-tsq1AgdLg3Hs",
                    "color": "turquoise",
                    "size": "XL",
                    "price": 40.39,
                    "stock": 382
                  },
                  {
                    "id": "VAR-zY9bqHf8aNIw",
                    "color": "pink",
                    "size": "S",
                    "price": 17.6,
                    "stock": 625
                  }
                ],
                "tags": [
                  "premium"
                ],
                "status": "active"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/products"
                },
                "example": {
                  "sellerId": null,
                  "categoryId": null,
                  "name": "api-test 11/17/2025, 4:04:56 PM",
                  "description": "Introducing the Lebanon-inspired Chips, blending ordinary style with local craftsmanship",
                  "price": 48.18,
                  "stock": 163,
                  "variants": [
                    {
                      "id": "VAR-tsq1AgdLg3Hs",
                      "color": "turquoise",
                      "size": "XL",
                      "price": 40.39,
                      "stock": 382
                    },
                    {
                      "id": "VAR-zY9bqHf8aNIw",
                      "color": "pink",
                      "size": "S",
                      "price": 17.6,
                      "stock": 625
                    }
                  ],
                  "tags": [
                    "premium"
                  ],
                  "status": "active",
                  "createdAt": 1763538081460,
                  "modifiedAt": 1763538081460,
                  "id": 1
                }
              }
            }
          }
        }
      }
    },
    "/products/{id}": {
      "get": {
        "isSelect": true,
        "summary": "Get products by id",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "products found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/products"
                },
                "example": {
                  "sellerId": null,
                  "categoryId": null,
                  "name": "api-test 11/17/2025, 4:04:56 PM",
                  "description": "Introducing the Lebanon-inspired Chips, blending ordinary style with local craftsmanship",
                  "price": 48.18,
                  "stock": 163,
                  "variants": [
                    {
                      "id": "VAR-tsq1AgdLg3Hs",
                      "color": "turquoise",
                      "size": "XL",
                      "price": 40.39,
                      "stock": 382
                    },
                    {
                      "id": "VAR-zY9bqHf8aNIw",
                      "color": "pink",
                      "size": "S",
                      "price": 17.6,
                      "stock": 625
                    }
                  ],
                  "tags": [
                    "premium"
                  ],
                  "status": "active",
                  "createdAt": 1763538081460,
                  "modifiedAt": 1763538081460,
                  "id": 1
                }
              }
            }
          }
        }
      },
      "put": {
        "isSelect": true,
        "summary": "Update products by id",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/products"
              },
              "example": {
                "sellerId": null,
                "categoryId": null,
                "name": "api-test 11/17/2025, 4:04:56 PM",
                "description": "Introducing the Lebanon-inspired Chips, blending ordinary style with local craftsmanship",
                "price": 48.18,
                "stock": 163,
                "variants": [
                  {
                    "id": "VAR-tsq1AgdLg3Hs",
                    "color": "turquoise",
                    "size": "XL",
                    "price": 40.39,
                    "stock": 382
                  },
                  {
                    "id": "VAR-zY9bqHf8aNIw",
                    "color": "pink",
                    "size": "S",
                    "price": 17.6,
                    "stock": 625
                  }
                ],
                "tags": [
                  "premium"
                ],
                "status": "active"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "products updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/products"
                },
                "example": {
                  "sellerId": null,
                  "categoryId": null,
                  "name": "api-test 11/17/2025, 4:04:56 PM",
                  "description": "Introducing the Lebanon-inspired Chips, blending ordinary style with local craftsmanship",
                  "price": 48.18,
                  "stock": 163,
                  "variants": [
                    {
                      "id": "VAR-tsq1AgdLg3Hs",
                      "color": "turquoise",
                      "size": "XL",
                      "price": 40.39,
                      "stock": 382
                    },
                    {
                      "id": "VAR-zY9bqHf8aNIw",
                      "color": "pink",
                      "size": "S",
                      "price": 17.6,
                      "stock": 625
                    }
                  ],
                  "tags": [
                    "premium"
                  ],
                  "status": "active",
                  "createdAt": 1763538081460,
                  "modifiedAt": 1763538081460,
                  "id": 1
                }
              }
            }
          },
          "404": {
            "description": "Not found"
          }
        }
      },
      "delete": {
        "isSelect": true,
        "summary": "Delete products by id",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "products deleted successfully"
          },
          "404": {
            "description": "Not found"
          }
        }
      }
    },
    "/reviews/{id}": {
      "delete": {
        "isSelect": true,
        "summary": "Delete reviews by id",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "reviews deleted successfully"
          },
          "404": {
            "description": "Not found"
          }
        }
      }
    },
    "/products/bulk-update": {
      "post": {
        "isSelect": true,
        "summary": "Bulk update product stock (supports update | subtract)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "updates"
                ],
                "properties": {
                  "updates": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "object",
                      "required": [
                        "productId"
                      ],
                      "additionalProperties": false,
                      "properties": {
                        "productId": {
                          "type": "integer",
                          "example": 1
                        },
                        "stock": {
                          "type": "integer",
                          "nullable": true,
                          "example": 100,
                          "minimum": 0
                        }
                      }
                    }
                  },
                  "operation": {
                    "type": "string",
                    "enum": [
                      "update",
                      "subtract"
                    ],
                    "default": "update",
                    "example": "update"
                  }
                },
                "additionalProperties": false
              },
              "examples": {
                "fullSuccess": {
                  "summary": "Full success example (update stock to fixed values)",
                  "value": {
                    "updates": [
                      {
                        "productId": 1,
                        "stock": 50
                      },
                      {
                        "productId": 2,
                        "stock": 10
                      }
                    ],
                    "operation": "update"
                  }
                },
                "partialSuccess": {
                  "summary": "Partial success example (subtract and unknown product)",
                  "value": {
                    "updates": [
                      {
                        "productId": 1,
                        "stock": 5
                      },
                      {
                        "productId": 99999,
                        "stock": 10
                      },
                      {
                        "productId": 2,
                        "stock": 99999
                      }
                    ],
                    "operation": "subtract"
                  }
                },
                "invalidOperation": {
                  "summary": "Invalid operation",
                  "value": {
                    "updates": [
                      {
                        "productId": 1,
                        "stock": 5
                      }
                    ],
                    "operation": "multiply"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Full success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkUpdateResponse"
                }
              }
            }
          },
          "207": {
            "description": "Partial success (some items failed)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkUpdateResponse"
                },
                "examples": {
                  "partial": {
                    "value": {
                      "success": false,
                      "mode": "partial",
                      "operation": "subtract",
                      "meta": {
                        "totalProcessed": 3,
                        "successful": 2,
                        "failed": 1,
                        "hasWarnings": true,
                        "hasErrors": true
                      },
                      "results": [
                        {
                          "productId": 1,
                          "productName": "Product A",
                          "changes": {
                            "stock": 45,
                            "updatedAt": 1711111111111
                          },
                          "previousStock": 50
                        },
                        {
                          "productId": 2,
                          "productName": "Product B",
                          "changes": {
                            "stock": 0,
                            "updatedAt": 1711111111112
                          },
                          "previousStock": 20,
                          "warnings": [
                            {
                              "code": "STOCK_DEPLETED",
                              "message": "Stock depleted for product 2"
                            }
                          ]
                        }
                      ],
                      "errors": [
                        {
                          "code": "PRODUCT_NOT_FOUND",
                          "message": "Product not found: 99999",
                          "productId": 99999
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation / all failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkUpdateResponse"
                },
                "examples": {
                  "missingUpdates": {
                    "summary": "updates yok/yanlış tip",
                    "value": {
                      "success": false,
                      "mode": "failed",
                      "operation": "update",
                      "meta": {
                        "totalProcessed": 0,
                        "successful": 0,
                        "failed": 0,
                        "hasWarnings": false,
                        "hasErrors": true
                      },
                      "errors": [
                        {
                          "code": "UPDATES_INVALID",
                          "message": "updates must be an array"
                        }
                      ]
                    }
                  },
                  "duplicateIds": {
                    "summary": "Duplicate productId → strict 400",
                    "value": {
                      "success": false,
                      "mode": "failed",
                      "operation": "update",
                      "meta": {
                        "totalProcessed": 3,
                        "successful": 0,
                        "failed": 3,
                        "hasWarnings": false,
                        "hasErrors": true,
                        "duplicateIds": [
                          1
                        ]
                      },
                      "errors": [
                        {
                          "code": "DUPLICATE_IDS",
                          "message": "Duplicate productId(s) are not allowed: 1"
                        }
                      ]
                    }
                  },
                  "invalidOperation": {
                    "summary": "Geçersiz operation",
                    "value": {
                      "success": false,
                      "mode": "failed",
                      "operation": "update",
                      "meta": {
                        "totalProcessed": 1,
                        "successful": 0,
                        "failed": 1,
                        "hasWarnings": false,
                        "hasErrors": true
                      },
                      "errors": [
                        {
                          "code": "OPERATION_INVALID",
                          "message": "Allowed: update, subtract"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "413": {
            "description": "Batch too large",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "mode": {
                      "type": "string"
                    },
                    "error": {
                      "type": "string"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ErrorItem"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/categories/{id}/sales-stats": {
      "get": {
        "isSelect": true,
        "summary": "Get category sales statistics",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "example": 1
          }
        ],
        "responses": {
          "200": {
            "description": "Category sales statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategorySalesStats"
                },
                "examples": {
                  "normal": {
                    "summary": "Normal response",
                    "value": {
                      "categoryId": 1,
                      "categoryName": "Category A",
                      "totalProducts": 10,
                      "totalSales": 150,
                      "totalRevenue": 4500.75,
                      "averageOrderValue": 90.15,
                      "topSellingProducts": [
                        {
                          "productId": 5,
                          "productName": "Product X",
                          "salesCount": 50,
                          "revenue": 1500
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "invalid id"
          },
          "404": {
            "description": "category not found"
          }
        }
      }
    },
    "/categories/performance-comparison": {
      "get": {
        "isSelect": true,
        "summary": "Compare performance metrics across categories",
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer"
            },
            "description": "Number of categories to return",
            "example": 10
          },
          {
            "in": "query",
            "name": "sortBy",
            "schema": {
              "type": "string",
              "enum": [
                "totalRevenue",
                "totalSales",
                "totalProducts",
                "averagePrice"
              ]
            },
            "description": "Sort by metric",
            "example": "totalRevenue"
          }
        ],
        "responses": {
          "200": {
            "description": "Category performance comparison",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryPerformanceComparison"
                },
                "examples": {
                  "normal": {
                    "summary": "Normal response",
                    "value": {
                      "sortBy": "totalRevenue",
                      "totalCategories": 5,
                      "comparison": [
                        {
                          "categoryId": 1,
                          "categoryName": "Category A",
                          "totalProducts": 10,
                          "activeProducts": 8,
                          "totalSales": 150,
                          "totalRevenue": 4500.75,
                          "totalStock": 1000,
                          "averagePrice": 45.5,
                          "averageOrderValue": 90.15
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/orders/filter": {
      "get": {
        "isSelect": true,
        "summary": "Filter orders with variable parameters",
        "parameters": [
          {
            "in": "query",
            "name": "orderId",
            "schema": {
              "type": "integer"
            },
            "description": "Get single order by ID (only this returns a single_order result)"
          },
          {
            "in": "query",
            "name": "userId",
            "schema": {
              "type": "integer"
            },
            "description": "Filter by user ID"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "failed",
                "cancelled",
                "returned",
                "delivered"
              ]
            },
            "description": "Filter by order status"
          },
          {
            "in": "query",
            "name": "startDate",
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "description": "Start date (timestamp ms)"
          },
          {
            "in": "query",
            "name": "endDate",
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "description": "End date (timestamp ms)"
          }
        ],
        "responses": {
          "200": {
            "description": "Orders based on filter parameters",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/SingleOrderResult"
                    },
                    {
                      "$ref": "#/components/schemas/UserOrdersResult"
                    },
                    {
                      "$ref": "#/components/schemas/StatusOrdersResult"
                    },
                    {
                      "$ref": "#/components/schemas/UserStatusOrdersResult"
                    },
                    {
                      "$ref": "#/components/schemas/DateRangeOrdersResult"
                    },
                    {
                      "$ref": "#/components/schemas/AllOrdersResult"
                    }
                  ],
                  "discriminator": {
                    "propertyName": "type",
                    "mapping": {
                      "single_order": "#/components/schemas/SingleOrderResult",
                      "user_orders": "#/components/schemas/UserOrdersResult",
                      "status_orders": "#/components/schemas/StatusOrdersResult",
                      "user_status_orders": "#/components/schemas/UserStatusOrdersResult",
                      "date_range_orders": "#/components/schemas/DateRangeOrdersResult",
                      "all_orders": "#/components/schemas/AllOrdersResult"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "invalid parameters"
          },
          "404": {
            "description": "order or user not found"
          }
        }
      }
    },
    "/orders/flexible-search": {
      "post": {
        "isSelect": true,
        "summary": "Flexible order search with alternative case scenarios",
        "description": "\n                    Search orders with different behaviors based on provided fields:\n                    - orderId (unique): returns single order object\n                    - Only userId: returns array of all orders by that user\n                    - userId + status: returns array of orders matching both\n                    - status: returns array of all orders with that status\n                    - totalAmountMin + totalAmountMax: returns array of orders in amount range\n                    - dateFrom + dateTo: returns array of orders in date range (timestamp)\n                    - Complex combinations: returns array filtered by all provided criteria\n                ",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "orderId": {
                    "type": "integer",
                    "nullable": true,
                    "example": 1
                  },
                  "userId": {
                    "type": "integer",
                    "nullable": true,
                    "example": 5
                  },
                  "status": {
                    "type": "string",
                    "nullable": true,
                    "example": "delivered"
                  },
                  "totalAmountMin": {
                    "type": "number",
                    "nullable": true,
                    "example": 10
                  },
                  "totalAmountMax": {
                    "type": "number",
                    "nullable": true,
                    "example": 500
                  },
                  "dateFrom": {
                    "type": "integer",
                    "nullable": true,
                    "example": 1609459200000,
                    "description": "Unix timestamp (ms)"
                  },
                  "dateTo": {
                    "type": "integer",
                    "nullable": true,
                    "example": 1704067200000,
                    "description": "Unix timestamp (ms)"
                  }
                }
              },
              "examples": {
                "byOrderId": {
                  "summary": "Search by orderId (returns single object - unique)",
                  "value": {
                    "orderId": 1
                  }
                },
                "byUserIdOnly": {
                  "summary": "Search by userId only (returns array)",
                  "value": {
                    "userId": 5
                  }
                },
                "byUserIdAndStatus": {
                  "summary": "Search by userId and status (returns array)",
                  "value": {
                    "userId": 5,
                    "status": "delivered"
                  }
                },
                "byStatus": {
                  "summary": "Search by status only (returns array)",
                  "value": {
                    "status": "delivered"
                  }
                },
                "byAmountRange": {
                  "summary": "Search by amount range (returns array)",
                  "value": {
                    "totalAmountMin": 10,
                    "totalAmountMax": 500
                  }
                },
                "byDateRange": {
                  "summary": "Search by date range (returns array)",
                  "value": {
                    "dateFrom": 1609459200000,
                    "dateTo": 1704067200000
                  }
                },
                "complex": {
                  "summary": "Complex search with multiple criteria (returns array)",
                  "value": {
                    "userId": 5,
                    "status": "delivered",
                    "totalAmountMin": 10,
                    "totalAmountMax": 500
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Order(s) found",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/Order"
                    },
                    {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Order"
                      }
                    }
                  ]
                },
                "examples": {
                  "singleOrder": {
                    "summary": "Single order (orderId search)",
                    "value": {
                      "id": 1,
                      "userId": 5,
                      "status": "delivered",
                      "totalAmount": 125.5,
                      "items": [],
                      "createdAt": 1609459200000
                    }
                  },
                  "multipleOrders": {
                    "summary": "Array of orders (other searches)",
                    "value": [
                      {
                        "id": 1,
                        "userId": 5,
                        "status": "delivered",
                        "totalAmount": 125.5,
                        "items": [],
                        "createdAt": 1609459200000
                      },
                      {
                        "id": 2,
                        "userId": 5,
                        "status": "delivered",
                        "totalAmount": 89.99,
                        "items": [],
                        "createdAt": 1609460000000
                      }
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "At least one search field is required or invalid combination"
          },
          "404": {
            "description": "No orders found"
          }
        }
      }
    },
    "/products/flexible-search": {
      "post": {
        "isSelect": true,
        "summary": "Flexible product search with alternative case scenarios",
        "description": "\n                    Search products with different behaviors based on provided fields:\n                    - Only name: returns array of all products with that name (partial match)\n                    - name + categoryId: returns array of products matching both\n                    - sellerId: returns array of all products by that seller\n                    - priceMin + priceMax: returns array of products in price range\n                    - categoryId + priceMin + priceMax: returns array filtered by category and price\n                    - stockMin: returns array of products with minimum stock\n                    - Complex combinations: returns array filtered by all provided criteria\n                ",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "nullable": true,
                    "example": "Product"
                  },
                  "categoryId": {
                    "type": "integer",
                    "nullable": true,
                    "example": 5
                  },
                  "sellerId": {
                    "type": "integer",
                    "nullable": true,
                    "example": 10
                  },
                  "priceMin": {
                    "type": "number",
                    "nullable": true,
                    "example": 10
                  },
                  "priceMax": {
                    "type": "number",
                    "nullable": true,
                    "example": 100
                  },
                  "stockMin": {
                    "type": "integer",
                    "nullable": true,
                    "example": 5
                  }
                }
              },
              "examples": {
                "byNameOnly": {
                  "summary": "Search by name only (returns array)",
                  "value": {
                    "name": "Product"
                  }
                },
                "byNameAndCategory": {
                  "summary": "Search by name and categoryId (returns array)",
                  "value": {
                    "name": "Product",
                    "categoryId": 5
                  }
                },
                "bySellerId": {
                  "summary": "Search by sellerId (returns array)",
                  "value": {
                    "sellerId": 10
                  }
                },
                "byPriceRange": {
                  "summary": "Search by price range (returns array)",
                  "value": {
                    "priceMin": 10,
                    "priceMax": 100
                  }
                },
                "byCategoryAndPrice": {
                  "summary": "Search by categoryId and price range (returns array)",
                  "value": {
                    "categoryId": 5,
                    "priceMin": 10,
                    "priceMax": 100
                  }
                },
                "byStockMin": {
                  "summary": "Search by minimum stock (returns array)",
                  "value": {
                    "stockMin": 5
                  }
                },
                "complex": {
                  "summary": "Complex search with multiple criteria (returns array)",
                  "value": {
                    "name": "Product",
                    "categoryId": 5,
                    "priceMin": 10,
                    "priceMax": 100
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Product(s) found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Product"
                  }
                },
                "examples": {
                  "products": {
                    "summary": "Array of products",
                    "value": [
                      {
                        "id": 1,
                        "name": "Product Name",
                        "categoryId": 5,
                        "sellerId": 10,
                        "price": 25.99,
                        "stock": 100,
                        "status": "active"
                      },
                      {
                        "id": 2,
                        "name": "Another Product",
                        "categoryId": 5,
                        "sellerId": 10,
                        "price": 45.5,
                        "stock": 50,
                        "status": "active"
                      }
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "At least one search field is required or invalid combination"
          },
          "404": {
            "description": "No products found"
          }
        }
      }
    },
    "/products/{id}/reviews-summary": {
      "get": {
        "isSelect": true,
        "summary": "Get product reviews summary",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "example": 1
          }
        ],
        "responses": {
          "200": {
            "description": "Product reviews summary",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductReviewsSummary"
                },
                "examples": {
                  "normal": {
                    "summary": "Normal response",
                    "value": {
                      "productId": 1,
                      "productName": "Product A",
                      "totalReviews": 25,
                      "averageRating": 4.2,
                      "ratingDistribution": {
                        "1": 2,
                        "2": 3,
                        "3": 5,
                        "4": 8,
                        "5": 7
                      },
                      "recentReviews": [
                        {
                          "reviewId": 10,
                          "userId": 5,
                          "userName": "John Doe",
                          "rating": 5,
                          "comment": "Great product!",
                          "createdAt": 1762406642107
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "invalid id"
          },
          "404": {
            "description": "product not found"
          }
        }
      }
    },
    "/users/flexible-search": {
      "post": {
        "isSelect": true,
        "summary": "Flexible user search with alternative case scenarios",
        "description": "\n                    Search users with different behaviors based on provided fields:\n                    - Only firstName: returns array of all users with that first name\n                    - firstName + lastName: returns array of users matching both\n                    - email (unique): returns single user object\n                    - phone (unique): returns single user object\n                    - phone + firstName/lastName: returns array filtered by phone and name\n                ",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstName": {
                    "type": "string",
                    "nullable": true,
                    "example": "John"
                  },
                  "lastName": {
                    "type": "string",
                    "nullable": true,
                    "example": "Doe"
                  },
                  "email": {
                    "type": "string",
                    "nullable": true,
                    "example": "user@example.com"
                  },
                  "phone": {
                    "type": "string",
                    "nullable": true,
                    "example": "+1234567890"
                  }
                }
              },
              "examples": {
                "byEmail": {
                  "summary": "Search by email (returns single object - unique)",
                  "value": {
                    "email": "user@example.com"
                  }
                },
                "byPhone": {
                  "summary": "Search by phone (returns single object - unique)",
                  "value": {
                    "phone": "+1234567890"
                  }
                },
                "byFirstNameOnly": {
                  "summary": "Search by firstName only (returns array)",
                  "value": {
                    "firstName": "John"
                  }
                },
                "byFirstNameAndLastName": {
                  "summary": "Search by firstName and lastName (returns array)",
                  "value": {
                    "firstName": "John",
                    "lastName": "Doe"
                  }
                },
                "byPhoneAndName": {
                  "summary": "Search by phone and firstName (returns array)",
                  "value": {
                    "phone": "+1234567890",
                    "firstName": "John"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User(s) found",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/User"
                    },
                    {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/User"
                      }
                    }
                  ]
                },
                "examples": {
                  "singleUser": {
                    "summary": "Single user (email or phone search)",
                    "value": {
                      "id": 1,
                      "email": "user@example.com",
                      "firstName": "John",
                      "lastName": "Doe",
                      "role": "buyer",
                      "status": "active"
                    }
                  },
                  "multipleUsers": {
                    "summary": "Array of users (name search)",
                    "value": [
                      {
                        "id": 1,
                        "email": "john1@example.com",
                        "firstName": "John",
                        "lastName": "Doe",
                        "role": "buyer"
                      },
                      {
                        "id": 2,
                        "email": "john2@example.com",
                        "firstName": "John",
                        "lastName": "Smith",
                        "role": "seller"
                      }
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "At least one search field is required or invalid combination"
          },
          "404": {
            "description": "No users found"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "products": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "readOnly": true
          },
          "sellerId": {
            "type": "integer",
            "description": "relation -> users.id",
            "x-relation": {
              "entity": "users",
              "field": "id",
              "where": {
                "role": "seller"
              }
            }
          },
          "categoryId": {
            "type": "integer",
            "description": "relation -> categories.id",
            "x-relation": {
              "entity": "categories",
              "field": "id"
            }
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "stock": {
            "type": "integer"
          },
          "variants": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string"
                },
                "color": {
                  "type": "string"
                },
                "size": {
                  "type": "string",
                  "description": "Accepted values (not restricted): XS, S, M, L, XL, XXL",
                  "x-enum-values": [
                    "XS",
                    "S",
                    "M",
                    "L",
                    "XL",
                    "XXL"
                  ]
                },
                "price": {
                  "type": "number"
                },
                "stock": {
                  "type": "integer"
                }
              },
              "required": [
                "id",
                "color",
                "size",
                "price",
                "stock"
              ]
            },
            "minItems": 1,
            "maxItems": 3
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "Accepted values (not restricted): featured, bestseller, limited, exclusive, recommended, premium",
              "x-enum-values": [
                "featured",
                "bestseller",
                "limited",
                "exclusive",
                "recommended",
                "premium"
              ]
            },
            "minItems": 1,
            "maxItems": 2
          },
          "status": {
            "type": "string",
            "description": "Accepted values (not restricted): active, inactive",
            "x-enum-values": [
              "active",
              "inactive"
            ]
          },
          "createdAt": {
            "type": "integer",
            "format": "int64",
            "description": "Unix timestamp (ms)"
          },
          "modifiedAt": {
            "type": "integer",
            "format": "int64",
            "description": "Unix timestamp (ms)"
          }
        },
        "required": [
          "id",
          "sellerId",
          "categoryId",
          "name",
          "description",
          "price",
          "stock",
          "variants",
          "tags",
          "status",
          "createdAt",
          "modifiedAt"
        ]
      },
      "BulkUpdateResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "mode": {
            "type": "string",
            "enum": [
              "full",
              "partial",
              "failed"
            ]
          },
          "operation": {
            "type": "string",
            "enum": [
              "update",
              "subtract"
            ]
          },
          "meta": {
            "$ref": "#/components/schemas/BulkUpdateMeta"
          },
          "results": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ResultItem"
            }
          },
          "errors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ErrorItem"
            }
          },
          "warnings": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/WarningItem"
            }
          }
        }
      },
      "ErrorItem": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "productId": {
            "type": "integer",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "CategorySalesStats": {
        "type": "object",
        "properties": {
          "categoryId": {
            "type": "integer",
            "example": 1
          },
          "categoryName": {
            "type": "string",
            "example": "Category A"
          },
          "totalProducts": {
            "type": "integer",
            "example": 10
          },
          "totalSales": {
            "type": "integer",
            "example": 150
          },
          "totalRevenue": {
            "type": "number",
            "format": "float",
            "example": 4500.75
          },
          "averageOrderValue": {
            "type": "number",
            "format": "float",
            "example": 90.15
          },
          "topSellingProducts": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "productId": {
                  "type": "integer",
                  "example": 5
                },
                "productName": {
                  "type": "string",
                  "example": "Product X"
                },
                "salesCount": {
                  "type": "integer",
                  "example": 50
                },
                "revenue": {
                  "type": "number",
                  "format": "float",
                  "example": 1500
                }
              }
            }
          }
        }
      },
      "CategoryPerformanceComparison": {
        "type": "object",
        "properties": {
          "sortBy": {
            "type": "string",
            "example": "totalRevenue"
          },
          "totalCategories": {
            "type": "integer",
            "example": 5
          },
          "comparison": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "categoryId": {
                  "type": "integer",
                  "example": 1
                },
                "categoryName": {
                  "type": "string",
                  "example": "Category A"
                },
                "totalProducts": {
                  "type": "integer",
                  "example": 10
                },
                "activeProducts": {
                  "type": "integer",
                  "example": 8
                },
                "totalSales": {
                  "type": "integer",
                  "example": 150
                },
                "totalRevenue": {
                  "type": "number",
                  "format": "float",
                  "example": 4500.75
                },
                "totalStock": {
                  "type": "integer",
                  "example": 1000
                },
                "averagePrice": {
                  "type": "number",
                  "format": "float",
                  "example": 45.5
                },
                "averageOrderValue": {
                  "type": "number",
                  "format": "float",
                  "example": 90.15
                }
              }
            }
          }
        }
      },
      "Order": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "userId": {
            "type": "integer"
          },
          "items": {
            "type": "array"
          },
          "totalAmount": {
            "type": "number"
          },
          "status": {
            "type": "string"
          }
        }
      },
      "SingleOrderResult": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "single_order"
            ]
          },
          "order": {
            "$ref": "#/components/schemas/OrderDetail"
          }
        },
        "required": [
          "type",
          "order"
        ]
      },
      "UserOrdersResult": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "user_orders"
            ]
          },
          "userId": {
            "type": "integer"
          },
          "userName": {
            "type": "string"
          },
          "totalOrders": {
            "type": "integer"
          },
          "totalSpent": {
            "type": "number"
          },
          "orders": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserOrderSummary"
            }
          }
        },
        "required": [
          "type",
          "userId",
          "userName",
          "totalOrders",
          "totalSpent",
          "orders"
        ]
      },
      "StatusOrdersResult": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "status_orders"
            ]
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "failed",
              "cancelled",
              "returned",
              "delivered"
            ]
          },
          "totalOrders": {
            "type": "integer"
          },
          "totalAmount": {
            "type": "number"
          },
          "orders": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/StatusOrderSummary"
            }
          }
        },
        "required": [
          "type",
          "status",
          "totalOrders",
          "totalAmount",
          "orders"
        ]
      },
      "UserStatusOrdersResult": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "user_status_orders"
            ]
          },
          "userId": {
            "type": "integer"
          },
          "userName": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "failed",
              "cancelled",
              "returned",
              "delivered"
            ]
          },
          "totalOrders": {
            "type": "integer"
          },
          "totalAmount": {
            "type": "number"
          },
          "orders": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserStatusOrderSummary"
            }
          }
        },
        "required": [
          "type",
          "userId",
          "userName",
          "status",
          "totalOrders",
          "totalAmount",
          "orders"
        ]
      },
      "DateRangeOrdersResult": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "date_range_orders"
            ]
          },
          "filters": {
            "type": "object",
            "properties": {
              "userId": {
                "type": "integer",
                "nullable": true
              },
              "status": {
                "type": "string",
                "enum": [
                  "pending",
                  "failed",
                  "cancelled",
                  "returned",
                  "delivered"
                ],
                "nullable": true
              },
              "startDate": {
                "type": "integer",
                "format": "int64",
                "nullable": true
              },
              "endDate": {
                "type": "integer",
                "format": "int64",
                "nullable": true
              }
            },
            "required": [
              "userId",
              "status",
              "startDate",
              "endDate"
            ]
          },
          "totalOrders": {
            "type": "integer"
          },
          "totalAmount": {
            "type": "number"
          },
          "orders": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DateRangeOrderSummary"
            }
          }
        },
        "required": [
          "type",
          "filters",
          "totalOrders",
          "totalAmount",
          "orders"
        ]
      },
      "AllOrdersResult": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "all_orders"
            ]
          },
          "totalOrders": {
            "type": "integer"
          },
          "totalAmount": {
            "type": "number"
          },
          "orders": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AllOrdersSummary"
            }
          }
        },
        "required": [
          "type",
          "totalOrders",
          "totalAmount",
          "orders"
        ]
      },
      "Product": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "name": {
            "type": "string"
          },
          "categoryId": {
            "type": "integer"
          },
          "sellerId": {
            "type": "integer"
          },
          "price": {
            "type": "number"
          },
          "stock": {
            "type": "integer"
          },
          "status": {
            "type": "string"
          }
        }
      },
      "ProductReviewsSummary": {
        "type": "object",
        "properties": {
          "productId": {
            "type": "integer",
            "example": 1
          },
          "productName": {
            "type": "string",
            "example": "Product A"
          },
          "totalReviews": {
            "type": "integer",
            "example": 25
          },
          "averageRating": {
            "type": "number",
            "format": "float",
            "example": 4.2
          },
          "ratingDistribution": {
            "type": "object",
            "properties": {
              "1": {
                "type": "integer",
                "example": 2
              },
              "2": {
                "type": "integer",
                "example": 3
              },
              "3": {
                "type": "integer",
                "example": 5
              },
              "4": {
                "type": "integer",
                "example": 8
              },
              "5": {
                "type": "integer",
                "example": 7
              }
            }
          },
          "recentReviews": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "reviewId": {
                  "type": "integer",
                  "example": 10
                },
                "userId": {
                  "type": "integer",
                  "example": 5
                },
                "userName": {
                  "type": "string",
                  "example": "John Doe"
                },
                "rating": {
                  "type": "integer",
                  "example": 5
                },
                "comment": {
                  "type": "string",
                  "nullable": true,
                  "example": "Great product!"
                },
                "createdAt": {
                  "type": "integer",
                  "example": 1762406642107
                }
              }
            }
          }
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "email": {
            "type": "string"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "role": {
            "type": "string"
          },
          "phone": {
            "type": "string"
          },
          "status": {
            "type": "string"
          }
        }
      }
    }
  }
}