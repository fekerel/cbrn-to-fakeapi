# GOAL
Proje, JSON Server Ã¼zerinde Ã§alÄ±ÅŸan fake bir API'ye test otomasyonu eklemek iÃ§in hazÄ±rlanmÄ±ÅŸtÄ±r.  
TÃ¼m endpoint'ler Swagger (OpenAPI) Ã¼zerinden alÄ±nacaktÄ±r.  
Testler TypeScript + Mocha + Chai kullanÄ±larak yazÄ±lacaktÄ±r.  
API istekleri **ApiService** Ã¼zerinden yapÄ±lacaktÄ±r.

---

# TASKS

1. ğŸ”€ **Branch OluÅŸtur**
   - Yeni bir branch oluÅŸtur:
     ```
     git checkout -b ai-<tool-name>-<YYYYMMDD-HHmm>
     ```
     (tool-name'den kastÄ±mÄ±z: cursor, windsurf, copilot, junie vb.)  
     Ã–rnek:
     ```powershell
     git checkout -b ("ai-" + "<tool-name>" + "-" + (Get-Date -Format "yyyyMMdd-HHmm"))
     ```
   - TÃ¼m iÅŸlemleri bu branch Ã¼zerinde gerÃ§ekleÅŸtir.
   - âš ï¸ **Commit veya push yapma.**  
     TÃ¼m testler baÅŸarÄ±yla geÃ§ince yalnÄ±zca "BÄ°TTÄ°" diyerek iÅŸlemi sonlandÄ±r.

---

2. ğŸ” **Kod Analizi**
   - `fake-api-test` klasÃ¶rÃ¼ altÄ±ndaki mevcut CRUD testlerini incele.  
   - Bu testlerdeki `expect` bloklarÄ±nÄ±n swagger'daki `response.data` yapÄ±sÄ±na gÃ¶re yazÄ±ldÄ±ÄŸÄ±nÄ± fark et.  
   - Kodun genel test mantÄ±ÄŸÄ±nÄ±, import dÃ¼zenini, test yazÄ±m stilini ve **ÅŸablon yapÄ±sÄ±nÄ±** kavra.  
   - CRUD testlerinde kullanÄ±lan test bloÄŸu formatÄ± **referans ÅŸablondur**.  
   - Yeni yazÄ±lacak tÃ¼m testler bu CRUD ÅŸablonuna **birebir sadÄ±k kalacaktÄ±r** (biÃ§im, sÄ±ralama, `expect` tarzÄ± dahil).

---

3. ğŸ“˜ **Swagger Verisini Oku**
   - Swagger'Ä±n gÃ¼ncel halini elde etmek iÃ§in `npm run openapi:fetch-isSelect` komutunu Ã§alÄ±ÅŸtÄ±r.  
   - Bunu yaptÄ±ÄŸÄ±nda gÃ¼ncel swagger spesifikasyonu proje root'undaki **openapi-isSelect.json** dosyasÄ±nda yer alacaktÄ±r.
   - Bu dosyayÄ± doÄŸrudan oku.  
   - TÃ¼m endpoint'leri, HTTP metodlarÄ±nÄ±, request parametrelerini ve response yapÄ±larÄ±nÄ± analiz et.

---

4. âš™ï¸ **Servis ÅablonlarÄ±nÄ± Ä°ncele**
   - `src/api/fakeApi` klasÃ¶rÃ¼ndeki mevcut servis dosyalarÄ±nÄ± tara.  
   - Servis fonksiyonlarÄ±nÄ±n nasÄ±l tanÄ±mlandÄ±ÄŸÄ±nÄ±, hangi HTTP methodlarÄ±nÄ± kullandÄ±ÄŸÄ±nÄ± ve nasÄ±l deÄŸer dÃ¶ndÃ¼rdÃ¼ÄŸÃ¼nÃ¼ incele.  
   - TÃ¼m API istekleri ÅŸu yapÄ± Ã¼zerinden yapÄ±lacak:
     ```ts
     await ApiService.getInstance().instance.<method>('/endpoint');
     ```
     > Burada `ApiService` zaten `http://localhost:8000` baseURL'Ã¼nÃ¼ iÃ§erir.  
     > Testlerde veya servislerde sadece endpoint kÄ±smÄ± (`/users`, `/posts` vb.) yazÄ±lmalÄ±dÄ±r.
   - Gerekiyorsa swagger'daki endpoint'lere uygun **yeni metotlar** oluÅŸtur.

---

5. ğŸ§© **Eksik Endpointler iÃ§in Kod Yaz**
   - Swagger'da tanÄ±mlÄ± olup proje iÃ§inde test veya servis dosyasÄ± bulunmayan endpointler iÃ§in:
     - Servis dosyasÄ± oluÅŸtur: `src/api/fakeApi/<ResourceName>Service.ts`
     - Test dosyasÄ± oluÅŸtur: `fake-api-test/<resourceName>.spec.ts`
   - Endpoint'lere uygun ÅŸekilde request iÅŸlemlerini bu servis dosyalarÄ±nda tanÄ±mla.  
   - Gerekirse servis tarafÄ±na **ek metotlar** yazÄ±labilir.

---

6. ğŸ§ª **Testleri Yaz**
   - Ä°lk olarak CRUD (Create, Read, Update, Delete) iÅŸlemlerine ait endpoint testlerini yaz.  
   - CRUD testleri tamamlanÄ±p tÃ¼mÃ¼ baÅŸarÄ±yla geÃ§tiÄŸinde, senaryosal veya Ã¶zel amaÃ§lÄ± endpoint testlerine geÃ§.  
   - Bu sÄ±ralamayÄ± **kesinlikle** koru: Ã¶nce CRUD â†’ sonra senaryosal endpointler.
   - Swagger'daki **tÃ¼m endpointler** iÃ§in test oluÅŸtur (endpoint sayÄ±sÄ± kadar).  
   - Testler 5'erli gruplar halinde yazÄ±lacak ve Ã§alÄ±ÅŸtÄ±rÄ±lacak:
     1. Ä°lk 5 testi yaz ve Ã§alÄ±ÅŸtÄ±r.  
     2. EÄŸer tÃ¼mÃ¼ **pass** geÃ§erse sonraki 5 teste geÃ§.  
     3. EÄŸer herhangi biri **fail** olursa, Ã¶nce baÅŸarÄ±sÄ±z testleri dÃ¼zelt ve tekrar dene.  
     4. TÃ¼m testler sÄ±rasÄ±yla geÃ§tikÃ§e diÄŸer gruba geÃ§.  
   - Sonunda swagger'daki endpoint sayÄ±sÄ± ile yazÄ±lmÄ±ÅŸ test sayÄ±sÄ± eÅŸitlendiÄŸinde iÅŸlemi tamamla.

   - âš ï¸ **KURALLAR:**
     - Her test **tek tek** `it()` bloÄŸu iÃ§inde yazÄ±lacak.  
     - **Kesinlikle** for, foreach, map veya benzeri dÃ¶ngÃ¼ tabanlÄ± otomatik test oluÅŸturma yapÄ±lmayacak.  
     - Her endpoint iÃ§in **ayrÄ± bir `it()` tanÄ±mÄ±** bulunacak.  
     - `it()` baÅŸlÄ±k formatÄ± ZORUNLU: `<METHOD> <PATH> - <expectation statement>` olmalÄ±dÄ±r.  
       - Dinamik segmentler placeholder ile yazÄ±lmalÄ±dÄ±r: `/users/{id}`, `/orders/{id}` gibi; kesinlikle `/users/1` gibi somut deÄŸer kullanÄ±lmamalÄ±.  
       - Ã–rnekler:  
         - `GET /users/{id} - should return 200`  
         - `POST /users - creates new user with id`  
         - `DELETE /orders/{id} - removes order (200)`  
     - CRUD testlerindeki test yapÄ±sÄ±, `describe` â€“ `it` sÄ±rasÄ±, `expect` biÃ§imi, `async` yapÄ±sÄ± ve `await` kullanÄ±mÄ± birebir korunacak.  
     - `it` ile test tanÄ±mlanÄ±rken **servis metoduna asla parametre yollanmayacak.**  
     - EÄŸer bir `data` gerekiyorsa bu `data`, **servis metodunun iÃ§inde** tanÄ±mlanacak.  
     - Servis iÃ§indeki istekler:
       ```ts
       await ApiService.getInstance().instance.<method>('/endpoint');
       ```
       biÃ§iminde olacak.
     - Gerekirse servis tarafÄ±na **ek yardÄ±mcÄ± metotlar** eklenebilir.

   - **Testlerde kontrol sÄ±rasÄ±** ÅŸu ÅŸekilde olacak:
     1. Ä°lk olarak `response.status` deÄŸeri doÄŸru mu (Ã¶rneÄŸin 200, 201 vb.) kontrol edilecek.  
     2. Daha sonra `response.data` iÃ§eriÄŸi `expect` bloklarÄ±yla kontrol edilecek.  
     3. EÄŸer istekte bir `id` alanÄ± gÃ¶nderildiyse ve response.data iÃ§inde de ilgili `id` alanÄ± varsa, bu iki ID'nin eÅŸleÅŸip eÅŸleÅŸmediÄŸi kontrol edilecek.  
        - EÄŸer ID'ler eÅŸleÅŸmiyorsa test **false (fail)** dÃ¶nmeli.  
        - EÄŸer ID'ler eÅŸleÅŸiyorsa test normal akÄ±ÅŸÄ±nda devam etmeli.  
     4. Nested (iÃ§ iÃ§e) objeler varsa:
        - Field tipleri (`string`, `number`, `array`, `object` vb.) doÄŸrulanacak.  
        - MantÄ±ksal doÄŸrulamalar (`id > 0`, `count >= 0`, `name` boÅŸ olmamalÄ± vb.) yapÄ±lacak.  
        - Array'ler varsa `length > 0` kontrolÃ¼ yapÄ±lacak.  
        - Tarih formatÄ± olan alanlarda (`createdAt`, `updatedAt`) uygun format olup olmadÄ±ÄŸÄ± doÄŸrulanacak.

   - CRUD testlerindeki kod formatÄ±, import yapÄ±sÄ± ve blok dÃ¼zeni **zorunlu referans** olarak kabul edilecek.

   - ğŸ’¥ **HER TESTE Ã–ZEL DETAYLI EXPECTLER HAZIRLANACAK!**
     - Swagger'daki `response.data` ÅŸemasÄ±na gÃ¶re her endpoint iÃ§in ayrÄ± ayrÄ± detaylÄ± `expect` bloklarÄ± yaz.  
     - Her field iÃ§in tipi ve olasÄ± deÄŸeri kontrol et.  
     - EÄŸer bir endpoint nested veri dÃ¶ndÃ¼rÃ¼yorsa, alt alanlarÄ±nÄ± da `expect` ile doÄŸrula.  
     - SayÄ±sal alanlar iÃ§in mantÄ±ksal koÅŸullar (`> 0`, `>= 0`) kontrol edilecek.  
     - Boolean alanlar iÃ§in doÄŸru/yanlÄ±ÅŸ deÄŸerler test edilecek.  
     - Dizi dÃ¶nen response'larda her elemanÄ±n yapÄ±sÄ± doÄŸrulanacak.  
     - Response yapÄ±sÄ± swagger'daki ile birebir uyuÅŸmalÄ±.

   - ğŸ” **Ã‡OK YÃ–NLÃœ TEST KAPSAMASI**
     - **Her endpoint iÃ§in mÃ¼mkÃ¼n ve mantÄ±klÄ± olduÄŸunca sayÄ±da farklÄ± aÃ§Ä±dan testler yazÄ±lacak:**
       1. **Happy path**: standart, baÅŸarÄ±lÄ± akÄ±ÅŸ (201, 200 vs.)
       2. **Hata durumlarÄ±**: swagger'da belirtilen hata kodlarÄ± (400, 404, 409, 422, 500 vs.) test edilecek.
       3. **Discriminator analizi**: eÄŸer request body iÃ§inde bir discriminator field varsa (Ã¶rneÄŸin `type` alanÄ±), bu alan iÃ§in swagger'da belirtilen tÃ¼m deÄŸerler ayrÄ± ayrÄ± test edilecek ve her biri iÃ§in ilgili response schema doÄŸrulanacak.
       4. **Zorunlu alan eksikliÄŸi**: zorunlu alan eksik gÃ¶nderildiÄŸinde dÃ¶nen 400/422 testleri.
       5. **GeÃ§ersiz tip/format**: string yerine number, date formatÄ± hatalÄ± vb. durumlar (swagger validator'u aktifse).
       6. **Boundary / edge-case deÄŸerler**: sayÄ±sal alanlarda negatif, 0, Ã§ok bÃ¼yÃ¼k deÄŸer; string alanlarda boÅŸ, Ã§ok uzun, Ã¶zel karakter iÃ§eren deÄŸerler test edilebilir.
       7. **Var olmayan ID (404)**: dinamik path parameter ile var olmayan kayÄ±t sorgusu.
       8. **Conflict (409)**: unique constraint ihlali (Ã¶rn. aynÄ± email ile tekrar user yaratma).
       9. **Nested validasyon**: nested obje veya array iÃ§indeki alanlarÄ±n validation'Ä±.

     - YukarÄ±daki listeye uygun olarak her endpoint'in davranÄ±ÅŸÄ± Ã§ok yÃ¶nlÃ¼ test edilecek.  
     - Swagger'da aÃ§Ä±kÃ§a belirtilmemiÅŸ olsa bile, request body veya path parameter yapÄ±sÄ±ndan Ã§Ä±karÄ±labilecek discriminator, enum veya variant varsa her biri iÃ§in ayrÄ± test yazÄ±lacak.

---

7. â–¶ï¸ **Testleri Ã‡alÄ±ÅŸtÄ±r**
   - Testleri ÅŸu komutla Ã§alÄ±ÅŸtÄ±r:
     ```
     yarn run runner
     ```
   - 5'erli test gruplarÄ±nÄ± sÄ±rayla yÃ¼rÃ¼t.  
   - EÄŸer testlerden biri baÅŸarÄ±sÄ±z olursa Ã¶nce o testleri dÃ¼zeltip tekrar Ã§alÄ±ÅŸtÄ±r.  
   - TÃ¼m testler baÅŸarÄ±lÄ± olduÄŸunda diÄŸer gruba geÃ§.

---

8. âœ… **Tamamlanma**
   - Swagger'daki tÃ¼m endpoint'ler iÃ§in testler yazÄ±lmÄ±ÅŸ olmalÄ±.
   - TÃ¼m testler baÅŸarÄ±yla geÃ§miÅŸ olmalÄ±.
   - **Commit veya push yapma.**
   - Son olarak ÅŸu Ã§Ä±ktÄ±yÄ± ver:
     ```
     BÄ°TTÄ°
     ```

---

# TECHNOLOGIES
TypeScript Â· Mocha Â· Chai Â· JSON Server Â· Swagger (OpenAPI)  
TÃ¼m istekler `ApiService.getInstance().instance` Ã¼zerinden gÃ¶nderilecektir.

---

# NOTES
- `chai.expect` bloklarÄ±nÄ± **detaylÄ±, kapsamlÄ± ve spesifik** biÃ§imde kullan.  
- Her endpoint testinde **kendine Ã¶zgÃ¼** expect kontrolleri yer almalÄ±.  
- CRUD testlerindeki biÃ§im, import dÃ¼zeni ve test yapÄ±sÄ±na %100 sadÄ±k kal.  
- DÃ¶ngÃ¼ ile test oluÅŸturmak **kesinlikle yasak.**  
- Swagger'daki response ÅŸemalarÄ±ndan otomatik tip Ã§Ä±karÄ±mÄ± yapÄ±labilir, ancak expect bloklarÄ± elle yazÄ±lmalÄ±.  
- Kodun temiz, dÃ¼zenli ve anlaÅŸÄ±lÄ±r olmasÄ±na dikkat et.
- **Discriminator veya enum deÄŸerlerini**: request'teki `type`, `kind`, `status` gibi alanlar farklÄ± deÄŸerler aldÄ±ÄŸÄ±nda response yapÄ±sÄ± veya validation deÄŸiÅŸiyorsa, **her bir varyant iÃ§in ayrÄ± test** yazÄ±lacak.
- **Hata durumlarÄ±**: swagger dokÃ¼manÄ±nda belirtilen tÃ¼m error response'lar (400, 404, 409, 422, 500) iÃ§in ayrÄ± testler yazÄ±lacak.
- **Edge case & boundary testler**: normal akÄ±ÅŸÄ±n dÄ±ÅŸÄ±nda kalan deÄŸerler (negatif sayÄ±lar, boÅŸ string, null, Ã§ok bÃ¼yÃ¼k deÄŸerler, geÃ§ersiz enum vs.) iÃ§in de testler eklenecek.
- Test sayÄ±sÄ± endpoint sayÄ±sÄ±ndan fazla olabilir; Ã¶nemli olan her endpoint'in tÃ¼m davranÄ±ÅŸlarÄ±nÄ±n test edilmesi.